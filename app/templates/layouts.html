{% load static %}
{% load widget_tweaks %}
<!DOCTYPE html>
<html lang="tm" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tor kömekçi</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"/>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

    <style>
        :root {
            --green: #92DEB5;
            --green-dark: #6ab88a;
            --glow: rgba(146, 222, 181, 0.6);
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #0a0e17;
            color: #f0f8ff;
            min-height: 100vh;
        }

  }

        /* Белое + зелёное свечение — строго и дорого */
        .text-gradient {
            background: linear-gradient(90deg, #ffffff, var(--green), #ffffff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: drop-shadow(0 0 20px var(--glow));
            font-weight: 800;
        }

        .glass {
            background: rgba(15, 25, 40, 0.45);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(146, 222, 181, 0.2);
            box-shadow: 
                0 8px 32px rgba(0, 0, 0, 0.4),
                0 0 30px rgba(146, 222, 181, 0.15);
        }

        .neon-glow {
            box-shadow: 
                0 0 20px rgba(146, 222, 181, 0.4),
                0 0 40px rgba(146, 222, 181, 0.2),
                inset 0 0 20px rgba(146, 222, 181, 0.08);
            transition: all 0.4s ease;
        }

        .neon-glow:hover {
            box-shadow: 
                0 0 30px rgba(146, 222, 181, 0.7),
                0 0 60px rgba(146, 222, 181, 0.4);
        }

        .network-canvas {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 0;
            pointer-events: none;
            opacity: 0.7;
        }

        /* Белые акценты на кнопках */
        .btn-primary {
            background: linear-gradient(135deg, #ffffff, var(--green));
            background-size: 200%;
            color: #000 !important;
            font-weight: 700;
            border: 1px solid var(--green);
            transition: all 0.4s;
        }
        .btn-primary:hover {
            background-position: 100%;
            box-shadow: 0 0 30px rgba(146, 222, 181, 0.6);
        }
    </style>
</head>
<body class="relative">

    <canvas class="network-canvas"></canvas>

    <!-- layouts.html — вставь вместо старого navbar -->
<div class="navbar fixed top-0 left-0 right-0 z-50 glass border-b border-white/10 backdrop-blur-xl shadow-2xl">
    <div class="navbar-start">
        <a href="{% url 'home' %}" class="flex items-center gap-4 group">
            <img src="{% static 'logo.png' %}" alt="Tor kömekçi" 
                 class="h-14 rounded-lg transition-all group-hover:scale-110 shadow-xl shadow-[#92DEB5]/30">
            <span class="text-4xl font-black text-gradient tracking-tight">Tor kömekçi</span>
        </a>
    </div>

    <div class="navbar-end">

        <!-- Десктоп: основные ссылки + дропдаун -->
        <div class="hidden lg:flex items-center gap-6">

            <!-- Основные страницы -->
            {% url 'home' as home_url %}
            {% url 'search_history_view' as history_url %}
            {% url 'speed_test' as speed_url %}
            {% url 'speed_test_history' as speed_hist_url %}
            {% url 'traffic_logs' as traffic_url %}

            <a href="{{ home_url }}"      class="btn btn-ghost glass text-lg {% if request.path == home_url %}neon-glow text-[#92DEB5] font-bold{% endif %}">Baş sahypa</a>
            <a href="{{ history_url }}"   class="btn btn-ghost glass text-lg {% if request.path == history_url %}neon-glow text-[#92DEB5]{% endif %}">Taryh</a>
            <a href="{{ speed_url }}"     class="btn btn-ghost glass text-lg {% if request.path == speed_url %}neon-glow text-[#92DEB5]{% endif %}">Tor Tizligi</a>
            <a href="{{ traffic_url }}"   class="btn btn-ghost glass text-lg {% if request.path == traffic_url %}neon-glow text-[#92DEB5]{% endif %}">Traffik</a>

            <!-- ДРОПДАУН С ИНСТРУМЕНТАМИ — ЭТО ГЛАВНОЕ! -->
            <div class="dropdown dropdown-end">
                <label tabindex="0" class="btn btn-ghost glass text-lg flex items-center gap-2 hover:neon-glow">
                    <i class="fas fa-tools text-xl"></i>
                    Instruments
                    <i class="fas fa-chevron-down text-sm"></i>
                </label>
                <ul tabindex="0" class="dropdown-content menu p-6 glass rounded-3xl shadow-2xl w-96 border border-white/10 neon-glow space-y-3">
                    
                    <li><a href="{% url 'base64_tool' %}" class="flex items-center gap-4 p-4 rounded-2xl hover:bg-white/10 transition-all">
                        <i class="fas fa-code text-2xl text-[#92DEB5]"></i>
                        <div>
                            <div class="font-bold text-white">Base64 Tool</div>
                            <div class="text-sm text-gray-400">Encode / Decode</div>
                        </div>
                    </a></li>

                    <li><a href="{% url 'ping_check' %}" class="flex items-center gap-4 p-4 rounded-2xl hover:bg-white/10 transition-all">
                        <i class="fas fa-stopwatch text-2xl text-[#92DEB5]"></i>
                        <div>
                            <div class="font-bold text-white">Ping & IP Check</div>
                            <div class="text-sm text-gray-400">Real-time latency</div>
                        </div>
                    </a></li>

                    <li><a href="{% url 'url_tool' %}" class="flex items-center gap-4 p-4 rounded-2xl hover:bg-white/10 transition-all">
                        <i class="fas fa-link text-2xl text-[#92DEB5]"></i>
                        <div>
                            <div class="font-bold text-white">URL Encoder/Decoder</div>
                            <div class="text-sm text-gray-400">Percent encoding</div>
                        </div>
                    </a></li>

                    <li><a href="{% url 'hash_tool' %}" class="flex items-center gap-4 p-4 rounded-2xl hover:bg-white/10 transition-all">
                        <i class="fas fa-fingerprint text-2xl text-[#92DEB5]"></i>
                        <div>
                            <div class="font-bold text-white">Hash Generator</div>
                            <div class="text-sm text-gray-400">MD5, SHA, CRC32</div>
                        </div>
                    </a></li>

                    <li><a href="{% url 'text_tools' %}" class="flex items-center gap-4 p-4 rounded-2xl hover:bg-white/10 transition-all">
                        <i class="fas fa-file-alt text-2xl text-[#92DEB5]"></i>
                        <div>
                            <div class="font-bold text-white">Text Tools</div>
                            <div class="text-sm text-gray-400">Case, reverse, count</div>
                        </div>
                    </a></li>

                </ul>
            </div>

            <!-- Админка / Выход -->
            {% if user.is_authenticated %}
                <a href="{% url 'admin:index' %}" class="btn btn-ghost glass text-lg">
                    <i class="fas fa-user-shield"></i> Admin
                </a>
                <a href="{% url 'logout' %}" class="btn btn-ghost text-red-400 hover:text-red-300">
                    <i class="fas fa-sign-out-alt"></i>
                </a>
            {% else %}
                <a href="{% url 'login' %}" class="btn bg-gradient-to-r from-[#92DEB5] to-[#6ab88a] text-black font-bold hover:scale-105">
                    Giriş
                </a>
            {% endif %}

        </div>

        <!-- Мобильное меню (бургер) -->
        <div class="lg:hidden dropdown dropdown-end">
            <label tabindex="0" class="btn btn-ghost glass text-3xl">
                <i class="fas fa-bars"></i>
            </label>
            <ul tabindex="0" class="menu dropdown-content p-6 glass rounded-3xl shadow-2xl w-80 mt-4 border border-white/10 neon-glow space-y-3">

                <li><a href="{{ home_url }}" class="text-lg font-bold">Baş sahypa</a></li>
                <li><a href="{{ history_url }}">Gözleg taryhy</a></li>
                <li><a href="{{ speed_url }}">Tor tizligi</a></li>
                <li><a href="{{ speed_hist_url }}">Tizlik taryhy</a></li>
                <li><a href="{{ traffic_url }}">Traffik</a></li>

                <div class="divider text-gray-500">Instruments</div>

                <li><a href="{% url 'base64_tool' %}" class="flex items-center gap-3"><i class="fas fa-code"></i> Base64</a></li>
                <li><a href="{% url 'ping_check' %}" class="flex items-center gap-3"><i class="fas fa-stopwatch"></i> Ping Check</a></li>
                <li><a href="{% url 'url_tool' %}" class="flex items-center gap-3"><i class="fas fa-link"></i> URL Tool</a></li>
                <li><a href="{% url 'hash_tool' %}" class="flex items-center gap-3"><i class="fas fa-fingerprint"></i> Hash</a></li>
                <li><a href="{% url 'text_tools' %}" class="flex items-center gap-3"><i class="fas fa-file-alt"></i> Text Tools</a></li>

                {% if user.is_authenticated %}
                <div class="divider"></div>
                <li><a href="{% url 'admin:index' %}">Admin panel</a></li>
                <li><a href="{% url 'logout' %}" class="text-red-400">Çykyş</a></li>
                {% endif %}
            </ul>
        </div>

    </div>
</div>


    <main class="relative z-10 container mx-auto px-6  pb-6 min-h-screen">
        {% block content %}
        {% endblock %}
    </main>

    <!-- Частицы — спокойные, но с белым и зелёным свечением -->
    <script>
        const canvas = document.querySelector('.network-canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        let w = canvas.width = window.innerWidth;
        let h = canvas.height = window.innerHeight;
    
        class Particle {
            constructor() {
                this.reset();
            }
            reset() {
                this.x = Math.random() * w;
                this.y = Math.random() * h;
                this.size = Math.random() * 1.4 + 0.4;        // Очень мелкие точки
                this.speedX = (Math.random() - 0.5) * 0.6;    // Медленное движение
                this.speedY = (Math.random() - 0.5) * 0.6;
                // Только приглушённые холодные и зелёные тона
                const colors = ['#92DEB5', '#a8e6cf', '#b8e0d2', '#d0f0e0', '#e0f8f0'];
                this.color = colors[Math.floor(Math.random() * colors.length)];
                this.opacity = Math.random() * 0.4 + 0.2;    // Полупрозрачные
            }
            update() {
                this.x += this.speedX;
                this.y += this.speedY;
    
                // Плавное отражение от краёв
                if (this.x <= 0 || this.x >= w) this.speedX *= -1;
                if (this.y <= 0 || this.y >= h) this.speedY *= -1;
    
                // Корректировка выхода за границы
                this.x = Math.max(0, Math.min(w, this.x));
                this.y = Math.max(0, Math.min(h, this.y));
            }
            draw() {
                ctx.globalAlpha = this.opacity;
                ctx.fillStyle = this.color;
                ctx.shadowBlur = 12;
                ctx.shadowColor = this.color;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }
    
        function connect() {
            // Очень редкие и тонкие линии — только между близкими частицами
            for (let i = 0; i < particles.length; i += 5) {
                for (let j = i + 1; j < particles.length; j += 5) {
                    const dx = particles[i].x - particles[j].x;
                    const dy = particles[i].y - particles[j].y;
                    const dist = Math.hypot(dx, dy);
    
                    if (dist < 180) {
                        const opacity = (1 - dist / 180) * 0.12;  // Почти невидимо
                        ctx.globalAlpha = opacity;
                        ctx.strokeStyle = '#92DEB5';
                        ctx.lineWidth = 0.5;
                        ctx.beginPath();
                        ctx.moveTo(particles[i].x, particles[i].y);
                        ctx.lineTo(particles[j].x, particles[j].y);
                        ctx.stroke();
                    }
                }
            }
        }
    
        function animate() {
            // Очень мягкое затухание — фон почти не меняется
            ctx.fillStyle = 'rgba(10, 14, 23, 0.03)';
            ctx.fillRect(0, 0, w, h);
    
            particles.forEach(p => {
                p.update();
                p.draw();
            });
    
            connect();
    
            // Возвращаем полную непрозрачность для следующего кадра
            ctx.globalAlpha = 1;
    
            requestAnimationFrame(animate);
        }
    
        // Адаптация под размер экрана
        window.addEventListener('resize', () => {
            w = canvas.width = window.innerWidth;
            h = canvas.height = window.innerHeight;
        });
    
        // Количество частиц — умеренное, не перегружает
        const particleCount = window.innerWidth < 768 ? 70 : 110;
        for (let i = 0; i < particleCount; i++) {
            particles.push(new Particle());
        }
    
        // Запуск
        animate();
    </script>
</body>
</html>