import pandas as pd
import os
import django

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "your_project.settings")
django.setup()

from app.models import ExploitExample

url = "https://raw.githubusercontent.com/offensive-security/exploitdb/master/files_exploits.csv"
df = pd.read_csv(url)

# Очистить старые данные
ExploitExample.objects.all().delete()

# Загрузка в базу
for _, row in df.iterrows():
    ExploitExample.objects.create(
        category=row.get('type', 'Unknown'),
        description=row.get('description', ''),
        exploit_filename=row.get('exploit_filename', ''),
        url="https://www.exploit-db.com" + row.get('path', '')
    )

print("ExploitDB импорт завершен!")
